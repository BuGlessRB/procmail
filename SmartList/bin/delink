#! /bin/sh
: &&O= || exec /bin/sh $0 $argv:q # we're in a csh, feed myself to sh
#########################################################################
#	delink		Gracefully disconnects a hardlinked file	#
#									#
#	Created by S.R. van den Berg, The Netherlands			#
#########################################################################
#$Id: delink,v 1.4 1993/06/02 15:30:42 berg Exp $

echo=echo		# /bin/echo
test=test		# /bin/test
rm=rm			# /bin/rm
mv=mv			# /bin/mv
cp=cp			# /bin/cp
dirname=dirname		# /bin/dirname

$test 0 = $# && $echo "Usage: delink filename ..." 1>&2 && exit 64

TMPF=delink.$$

trap "$rm -f \$TMPF; exit 1" 1 2 3 15

for a in "$@"
do
  TMPF="`dirname \"$a\"`"/delink.$$
  $cp -p "$a" "$TMPF" && $mv -f "$TMPF" "$a"
done
